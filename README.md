hicmaptools
----------------------

It is a commend line tool to access HiC maps. The complete program provides multi-query modes and analysis tools. 
A detailed document is avaiable in [the readthedocs of HiCmapTools](https://hicmaptools.readthedocs.io/).

Prerequisites
--------------
hicmaptools compilation requires the following tools installed on your system ``make``, ``gcc-c++`` and ``R``. 


Compile/Installation 
--------------------

Clone the git repository on your computer with the following command: 

    git clone git@github.com:cbcrg/hicmaptools.git hicmaptools
    
    
Make sure you have installed the required dependencies listed above. 
When done, move in the project root folder named ``hicmaptools`` and enter the 
following commands:     
    
    $ cd src
    $ make
    

The binary will be automatically copied to the path ``hicmaptools/bin``.

    
    $ make install
    
 
The binary will be automatically copied to the path specified by the environment 
variable ``$USER_BIN`` (check that it exists before run the make command).

Quick start
--------------------

    hicmaptools -in_map in.binmap -in_bin in.bins QUERY_MODE query.bed -output out_file.tsv
    or
    hicmaptools -in_hic in.hic [-in_hic_norm NONE] [-in_hic_resol 10000] QUERY_MODE query.bed -output out_file.tsv
    
    input:  
            -in_map        text .n_contact or binary .bimap by genBiMap commend 
            -in_bin        the bin file for contact map, .bins
            or
            -in_hic        .hic file generated by Juicer
            -in_hic_norm   optional, a normalization method (NONE|VC|VC_SQRT|KR, default: NONE)
            -in_hic_resol  optional, a resolution used to bin .hic (default: 10000)    
        
    QUERY_MODE: 
            -bait         calculate average contacts from downstream to upstream of interested position
        
            -local       list all contacts inside an interval

            -loop        contact intensity between two ends of a loop
            
            -pair        contacts between a pair region
            
            -sites       contacts between sites

            -submap      sub contact map of interested regions

            -TAD         sum and average of contacts inside TAD region
        
    other parameters:
            -ner_bin     check neighbouring bins for bait mode, (default: 10)
            -random      the size of the shffule sample (default: 100)
		
		
For instance:
>hicmaptools -in_map examples/fly_30k.binmap -in_bin examples/fly_30k.bins -bait examples/bait.bed -output temp.tsv

References
--------------------
* Jia-Ming Chang, Yi-Fu Weng, Wei-Ting Chang, Fu-An Lin, Giacomo Cavalli. "HiCmapTools: A tool to access HiC contact maps" submitted (2021).
* The parser of .*hic* is adapted from [straw](https://github.com/aidenlab/straw).
	* Neva C. Durand, James T. Robinson, Muhammad S. Shamim, Ido Machol, Jill P. Mesirov, Eric S. Lander, and Erez Lieberman Aiden. "Juicebox provides a visualization system for Hi-C contact maps with unlimited zoom." *Cell Systems* 3(1), 2016.
